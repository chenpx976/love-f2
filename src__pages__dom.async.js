"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[141],{8241:function(G,V,r){r.d(V,{ZP:function(){return M}});var S={};r.r(S),r.d(S,{funnel:function(){return T},pyramid:function(){return T}});var B={};r.r(B),r.d(B,{funnel:function(){return A},pyramid:function(){return A},rect:function(){return Y}});var N=r(36113),J=r(27825),O=r(26937),b=r(40177),z=r(99907),k=r(24294),x=r(32055),Z=r(87124),R=r(30895);function C(t,n){var v=(n.x-t.x)/2+t.x,i=(n.y-t.y)/2+t.y;return{x:v,y:i}}var F={textBaseline:"middle",fill:"#808080"};function T(t){var n=t.record,v=t.offsetX,i=t.offsetY,e=t.points,o=t.label,c=t.guide,a=n.origin,l=n.color,f,u;if((0,Z.mf)(o)){var s=e.length===4?C(e[1],e[2]):C(e[0],e[1]);f=(0,Z.CD)({x:s.x+v,y:s.y+i},F,o(a,l))}if((0,Z.mf)(c)){var h,d=C(e.length===4?C(e[0],e[1]):e[0],C(e[2],(h=e[3])!==null&&h!==void 0?h:e[1]));u=(0,Z.CD)({x:d.x,y:d.y,textBaseline:"middle",textAlign:"center"},F,c(a,l))}return(0,x.t)("group",null,f&&(0,x.t)("text",{attrs:f}),u&&(0,x.t)("text",{attrs:u}))}var y=function(t){return function(n){(0,z.Z)(i,n);var v=(0,k.Z)(i);function i(){return(0,N.Z)(this,i),v.apply(this,arguments)}return(0,J.Z)(i,[{key:"getDefaultCfg",value:function(){return{geomType:"interval",justifyContent:!0,startOnZero:!0}}},{key:"getDefaultSize",value:function(){var o=this.attrs,c=this.props,a=this.adjust,l=this.records,f=c.coord,u=c.sizeRatio,s=o.x,h=s.scale,d=h.values;if(u)return 1/d.length*u;var m={column:1/2,rose:.999999,multiplePie:3/4},L=d.length,g;f.isPolar?f.transposed&&L>1?g=m.multiplePie:g=m.rose:g=m.column;var p=1/d.length*g;return a&&a.type==="dodge"?p/l.length:p}},{key:"mapping",value:function(){for(var o=(0,O.Z)((0,b.Z)(i.prototype),"mapping",this).call(this),c=this.props,a=c.coord,l=this.getY0Value(),f=this.getDefaultSize(),u=0,s=o.length;u<s;u++)for(var h=o[u],d=h.children,m=0,L=d.length;m<L;m++){var g=d[m],p=g.normalized,P=g.size;if((0,Z.UM)(P)){var j=p.x,X=p.y,$=p.size,W=$===void 0?f:$;(0,Z.CD)(g,a.convertRect({x:j,y:X,y0:l,size:W}))}else{var H=g.x,K=g.y,Q={size:P,x:H,y:K,y0:l};(0,Z.CD)(g,a.transformToRect(Q))}(0,Z.CD)(g.shape,this.getSelectionStyle(g))}return o}},{key:"getPointY0",value:function(){var o=this.props,c=o.coord,a=this.getY0Value(),l=c.convertPoint({y:a,x:0});return l==null?void 0:l.y}},{key:"render",value:function(){var o=this.props,c=this.state,a=o.coord,l=o.shape,f=l===void 0?"rect":l,u=o.animation,s=o.showLabel,h=o.labelCfg,d=t[f],m=S[f],L=(0,Z.b$)({label:null,offsetX:0,offsetY:0},h);if(!d)return null;var g=c.selected,p=this.mapping(),P=this.getPointY0();return(0,x.t)(d,{coord:a,records:p,selected:g,shape:f,animation:u,showLabel:s,labelCfg:L,LabelView:m,y0:P})}}]),i}(R.Z)},D=r(59469),U=function(t){var n=t.records,v=t.animation,i=t.y0;return(0,x.t)("group",null,n.map(function(e){var o=e.key,c=e.children;return(0,x.t)("group",{key:o},c.map(function(a){var l=a.key,f=a.xMin,u=a.xMax,s=a.yMin,h=a.yMax,d=a.color,m=a.shape;return isNaN(f)||isNaN(u)||isNaN(s)||isNaN(h)?null:(0,x.t)("rect",{key:l,attrs:(0,D.Z)({x:f,y:s,width:u-f,height:h-s,fill:d},m),animation:(0,Z.b$)({appear:{easing:"linear",duration:450,property:["y","height"],start:{y:i,height:0}},update:{easing:"linear",duration:450,property:["x","y","width","height"]}},v)})}))}))},I=function(t){var n=t.coord,v=t.records,i=t.animation,e=n.center,o=n.startAngle,c=n.endAngle,a=n.radius;return(0,x.t)("group",{animation:{appear:(0,D.Z)((0,D.Z)({easing:"quadraticOut",duration:450},i&&i.appear),{},{clip:{type:"sector",property:["endAngle"],attrs:{x:e.x,y:e.y,startAngle:o,r:a},start:{endAngle:o},end:{endAngle:c}}})}},v.map(function(l){var f=l.key,u=l.children;return(0,x.t)("group",{key:f},u.map(function(s){var h=s.key,d=s.xMin,m=s.xMax,L=s.yMin,g=s.yMax,p=s.color,P=s.shape;return(0,x.t)("sector",{key:h,attrs:(0,D.Z)({x:e.x,y:e.y,fill:p,startAngle:d,endAngle:m,r0:L,r:g},P),animation:(0,Z.b$)({update:{easing:"linear",duration:450,property:["x","y","startAngle","endAngle","r0","r"]}},i)})}))}))},Y=function(t){var n=t.coord,v=n.type;return v==="rect"?(0,x.t)(U,(0,D.Z)({},t)):(0,x.t)(I,(0,D.Z)({},t))};function E(t){var n=t.xMin,v=t.xMax,i=t.yMin,e=t.yMax;return[{x:n,y:i},{x:v,y:i},{x:v,y:e},{x:n,y:e}]}var A=function(t){var n=t.records,v=t.shape,i=t.showLabel,e=t.labelCfg,o=t.LabelView,c=!1;return(0,x.t)("group",null,n.map(function(a,l){var f=a.key,u=a.children,s=l===n.length-1,h=s?a:n[l+1],d=h.children,m=E(d[0]),L=E(d[d.length-1]);c||(c=d[0].yMax>u[0].yMax),c&&(m.reverse(),L.reverse());var g=u.map(function(p,P){var j=E(p);return c&&j.reverse(),s?v==="pyramid"&&(j=[C(j[0],j[1]),j[2],j[3]]):(P===0&&(j[0]=m[3]),P===u.length-1&&(j[1]=L[2])),(0,D.Z)((0,D.Z)({},p),{},{points:j})});return(0,x.t)("group",{key:f},g.map(function(p){var P=p.points,j=p.color,X=p.shape;return(0,x.t)("group",null,(0,x.t)("polygon",{attrs:(0,D.Z)({points:P,fill:j},X)}),i&&o?(0,x.t)(o,(0,D.Z)({record:p,points:P},e)):null)}))}))},M=y(B)},92761:function(G,V,r){r.r(V),r.d(V,{default:function(){return I}});var S=r(36113),B=r(27825),N=r(19539),J=r(99907),O=r(24294),b=r(9694),z=r(84714),k=function(Y){(0,J.Z)(A,Y);var E=(0,O.Z)(A);function A(M){var t;(0,S.Z)(this,A),t=E.call(this,M),t.next=function(){var c=(0,N.Z)(t),a=c.state,l=c.props,f=a.index,u=a.count,s=a.delay,h=l.loop,d=h?(f+1)%u:f+1;d<u&&setTimeout(function(){t.setState({index:d})},s||0)};var n=M.delay,v=M.start,i=v===void 0?0:v,e=M.children,o=z.Z.toArray(e).length;return t.state={delay:n,count:o,index:i},t}return(0,B.Z)(A,[{key:"didMount",value:function(){var t=this.context,n=t.root;n.on("animationEnd",this.next)}},{key:"didUnmount",value:function(){var t=this.context,n=t.root;n.off("animationEnd",this.next)}},{key:"render",value:function(){var t=this.state,n=this.props,v=n.children,i=t.index,e=z.Z.toArray(v);return e[i]}}]),A}(b.Z),x=k,Z=r(14895),R=r(70113),C=r(49286),F=r(8241),T=r(77617),y=r(32648);console.log("\u{1F680} ~ file: dom.tsx ~ line 2 ~ Canvas",Z.Z);var D=[{genre:"Sports",sold:275},{genre:"Strategy",sold:115},{genre:"Action",sold:120},{genre:"Shooter",sold:350},{genre:"Other",sold:150}],U=function(){var E=(0,T.useRef)();return(0,T.useEffect)(function(){var A=E.current.getContext("2d");console.log("\u{1F680} ~ file: docs.tsx ~ line 16 ~ useEffect ~ context",A);var M=[{name:"London",\u6708\u4EFD:"Jan.",\u6708\u5747\u964D\u96E8\u91CF:18.9},{name:"London",\u6708\u4EFD:"Feb.",\u6708\u5747\u964D\u96E8\u91CF:28.8},{name:"London",\u6708\u4EFD:"Mar.",\u6708\u5747\u964D\u96E8\u91CF:39.3},{name:"London",\u6708\u4EFD:"Apr.",\u6708\u5747\u964D\u96E8\u91CF:81.4},{name:"London",\u6708\u4EFD:"May.",\u6708\u5747\u964D\u96E8\u91CF:47},{name:"London",\u6708\u4EFD:"Jun.",\u6708\u5747\u964D\u96E8\u91CF:20.3},{name:"London",\u6708\u4EFD:"Jul.",\u6708\u5747\u964D\u96E8\u91CF:24},{name:"London",\u6708\u4EFD:"Aug.",\u6708\u5747\u964D\u96E8\u91CF:35.6},{name:"Berlin",\u6708\u4EFD:"Jan.",\u6708\u5747\u964D\u96E8\u91CF:12.4},{name:"Berlin",\u6708\u4EFD:"Feb.",\u6708\u5747\u964D\u96E8\u91CF:23.2},{name:"Berlin",\u6708\u4EFD:"Mar.",\u6708\u5747\u964D\u96E8\u91CF:34.5},{name:"Berlin",\u6708\u4EFD:"Apr.",\u6708\u5747\u964D\u96E8\u91CF:99.7},{name:"Berlin",\u6708\u4EFD:"May.",\u6708\u5747\u964D\u96E8\u91CF:52.6},{name:"Berlin",\u6708\u4EFD:"Jun.",\u6708\u5747\u964D\u96E8\u91CF:35.5},{name:"Berlin",\u6708\u4EFD:"Jul.",\u6708\u5747\u964D\u96E8\u91CF:37.4},{name:"Berlin",\u6708\u4EFD:"Aug.",\u6708\u5747\u964D\u96E8\u91CF:42.4}],t=(0,y.jsx)(Z.Z,{context:A,pixelRatio:window.devicePixelRatio,children:(0,y.jsxs)(x,{loop:!0,delay:500,children:[(0,y.jsxs)(R.Z,{data:M,children:[(0,y.jsx)(C.ZP,{field:"\u6708\u4EFD"}),(0,y.jsx)(C.ZP,{field:"\u6708\u5747\u964D\u96E8\u91CF"}),(0,y.jsx)(F.ZP,{x:"\u6708\u4EFD",y:"\u6708\u5747\u964D\u96E8\u91CF",color:"name",adjust:{type:"dodge",marginRatio:.05}})]}),(0,y.jsxs)(R.Z,{data:M,children:[(0,y.jsx)(C.ZP,{field:"\u6708\u4EFD"}),(0,y.jsx)(C.ZP,{field:"\u6708\u5747\u964D\u96E8\u91CF"}),(0,y.jsx)(F.ZP,{x:"\u6708\u4EFD",y:"\u6708\u5747\u964D\u96E8\u91CF",color:"name",adjust:"stack"})]}),(0,y.jsxs)(R.Z,{data:M,coord:{transposed:!0},children:[(0,y.jsx)(C.ZP,{field:"\u6708\u4EFD"}),(0,y.jsx)(C.ZP,{field:"\u6708\u5747\u964D\u96E8\u91CF"}),(0,y.jsx)(F.ZP,{x:"\u6708\u4EFD",y:"\u6708\u5747\u964D\u96E8\u91CF",color:"name",adjust:"stack"})]}),(0,y.jsxs)(R.Z,{data:M,coord:{transposed:!0},children:[(0,y.jsx)(C.ZP,{field:"\u6708\u4EFD"}),(0,y.jsx)(C.ZP,{field:"\u6708\u5747\u964D\u96E8\u91CF"}),(0,y.jsx)(F.ZP,{x:"\u6708\u4EFD",y:"\u6708\u5747\u964D\u96E8\u91CF",color:"name",adjust:{type:"dodge",marginRatio:.05}})]})]})}),n=t.props,v=new Z.Z(n);v.render()},[]),(0,y.jsx)("div",{children:(0,y.jsx)("canvas",{ref:E,id:"myChart",width:"800",height:"500"})})},I=U}}]);
