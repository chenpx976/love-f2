(self.webpackChunk=self.webpackChunk||[]).push([[858],{56501:function(t,b,r){"use strict";var s=r(59469),i=r(36113),l=r(27825),R=r(99907),C=r(24294),M=r(77617),j=r(14895),T=function(p){(0,R.Z)(c,p);var S=(0,C.Z)(c);function c(E){var a;return(0,i.Z)(this,c),a=S.call(this,E),a.state={hasError:!1},a}return(0,l.Z)(c,[{key:"componentDidCatch",value:function(a,I){var P=this.props.onError;console.error("\u56FE\u8868\u6E32\u67D3\u5931\u8D25: ",a),typeof P=="function"&&P(a)}},{key:"render",value:function(){if(this.state.hasError){var a=this.props.fallback;return a||null}return this.props.children||null}}],[{key:"getDerivedStateFromError",value:function(a){return{hasError:!0}}}]),c}(M.Component),y=function(p){(0,R.Z)(c,p);var S=(0,C.Z)(c);function c(E){var a;(0,i.Z)(this,c),a=S.call(this,E);var I=E.canvasRef;return a.canvasRef=I||M.createRef(),a}return(0,l.Z)(c,[{key:"componentDidMount",value:function(){var a=this.canvasRef,I=this.props,P=a.current,K=P.getContext("2d"),k=new j.Z((0,s.Z)((0,s.Z)({pixelRatio:1},I),{},{context:K}));this.canvas=k,k.render()}},{key:"componentDidUpdate",value:function(){var a=this.canvas,I=this.props;a.update(I)}},{key:"render",value:function(){var a=this.props,I=a.className,P=I===void 0?"":I;return M.createElement("canvas",{className:"f2-chart ".concat(P),ref:this.canvasRef,style:{width:"100%",height:"100%",display:"block",padding:0,margin:0}})}},{key:"componentWillUnmount",value:function(){var a=this.canvas;a.destroy()}}]),c}(M.Component);b.Z=(0,M.forwardRef)(function(p,S){var c=p.fallback,E=p.onError;return M.createElement(T,{fallback:c,onError:E,children:M.createElement(y,(0,s.Z)((0,s.Z)({},p),{},{ref:S}))})})},8241:function(t,b,r){"use strict";r.d(b,{ZP:function(){return J}});var s={};r.r(s),r.d(s,{funnel:function(){return a},pyramid:function(){return a}});var i={};r.r(i),r.d(i,{funnel:function(){return V},pyramid:function(){return V},rect:function(){return z}});var l=r(36113),R=r(27825),C=r(26937),M=r(40177),j=r(99907),T=r(24294),y=r(32055),p=r(87124),S=r(30895);function c(e,v){var L=(v.x-e.x)/2+e.x,h=(v.y-e.y)/2+e.y;return{x:L,y:h}}var E={textBaseline:"middle",fill:"#808080"};function a(e){var v=e.record,L=e.offsetX,h=e.offsetY,n=e.points,u=e.label,m=e.guide,o=v.origin,d=v.color,_,x;if((0,p.mf)(u)){var f=n.length===4?c(n[1],n[2]):c(n[0],n[1]);_=(0,p.CD)({x:f.x+L,y:f.y+h},E,u(o,d))}if((0,p.mf)(m)){var Z,g=c(n.length===4?c(n[0],n[1]):n[0],c(n[2],(Z=n[3])!==null&&Z!==void 0?Z:n[1]));x=(0,p.CD)({x:g.x,y:g.y,textBaseline:"middle",textAlign:"center"},E,m(o,d))}return(0,y.t)("group",null,_&&(0,y.t)("text",{attrs:_}),x&&(0,y.t)("text",{attrs:x}))}var I=function(e){return function(v){(0,j.Z)(h,v);var L=(0,T.Z)(h);function h(){return(0,l.Z)(this,h),L.apply(this,arguments)}return(0,R.Z)(h,[{key:"getDefaultCfg",value:function(){return{geomType:"interval",justifyContent:!0,startOnZero:!0}}},{key:"getDefaultSize",value:function(){var u=this.attrs,m=this.props,o=this.adjust,d=this.records,_=m.coord,x=m.sizeRatio,f=u.x,Z=f.scale,g=Z.values;if(x)return 1/g.length*x;var O={column:1/2,rose:.999999,multiplePie:3/4},W=g.length,D;_.isPolar?_.transposed&&W>1?D=O.multiplePie:D=O.rose:D=O.column;var A=1/g.length*D;return o&&o.type==="dodge"?A/d.length:A}},{key:"mapping",value:function(){for(var u=(0,C.Z)((0,M.Z)(h.prototype),"mapping",this).call(this),m=this.props,o=m.coord,d=this.getY0Value(),_=this.getDefaultSize(),x=0,f=u.length;x<f;x++)for(var Z=u[x],g=Z.children,O=0,W=g.length;O<W;O++){var D=g[O],A=D.normalized,U=D.size;if((0,p.UM)(U)){var B=A.x,N=A.y,Y=A.size,H=Y===void 0?_:Y;(0,p.CD)(D,o.convertRect({x:B,y:N,y0:d,size:H}))}else{var X=D.x,$=D.y,G={size:U,x:X,y:$,y0:d};(0,p.CD)(D,o.transformToRect(G))}(0,p.CD)(D.shape,this.getSelectionStyle(D))}return u}},{key:"getPointY0",value:function(){var u=this.props,m=u.coord,o=this.getY0Value(),d=m.convertPoint({y:o,x:0});return d==null?void 0:d.y}},{key:"render",value:function(){var u=this.props,m=this.state,o=u.coord,d=u.shape,_=d===void 0?"rect":d,x=u.animation,f=u.showLabel,Z=u.labelCfg,g=e[_],O=s[_],W=(0,p.b$)({label:null,offsetX:0,offsetY:0},Z);if(!g)return null;var D=m.selected,A=this.mapping(),U=this.getPointY0();return(0,y.t)(g,{coord:o,records:A,selected:D,shape:_,animation:x,showLabel:f,labelCfg:W,LabelView:O,y0:U})}}]),h}(S.Z)},P=r(59469),K=function(e){var v=e.records,L=e.animation,h=e.y0;return(0,y.t)("group",null,v.map(function(n){var u=n.key,m=n.children;return(0,y.t)("group",{key:u},m.map(function(o){var d=o.key,_=o.xMin,x=o.xMax,f=o.yMin,Z=o.yMax,g=o.color,O=o.shape;return isNaN(_)||isNaN(x)||isNaN(f)||isNaN(Z)?null:(0,y.t)("rect",{key:d,attrs:(0,P.Z)({x:_,y:f,width:x-_,height:Z-f,fill:g},O),animation:(0,p.b$)({appear:{easing:"linear",duration:450,property:["y","height"],start:{y:h,height:0}},update:{easing:"linear",duration:450,property:["x","y","width","height"]}},L)})}))}))},k=function(e){var v=e.coord,L=e.records,h=e.animation,n=v.center,u=v.startAngle,m=v.endAngle,o=v.radius;return(0,y.t)("group",{animation:{appear:(0,P.Z)((0,P.Z)({easing:"quadraticOut",duration:450},h&&h.appear),{},{clip:{type:"sector",property:["endAngle"],attrs:{x:n.x,y:n.y,startAngle:u,r:o},start:{endAngle:u},end:{endAngle:m}}})}},L.map(function(d){var _=d.key,x=d.children;return(0,y.t)("group",{key:_},x.map(function(f){var Z=f.key,g=f.xMin,O=f.xMax,W=f.yMin,D=f.yMax,A=f.color,U=f.shape;return(0,y.t)("sector",{key:Z,attrs:(0,P.Z)({x:n.x,y:n.y,fill:A,startAngle:g,endAngle:O,r0:W,r:D},U),animation:(0,p.b$)({update:{easing:"linear",duration:450,property:["x","y","startAngle","endAngle","r0","r"]}},h)})}))}))},z=function(e){var v=e.coord,L=v.type;return L==="rect"?(0,y.t)(K,(0,P.Z)({},e)):(0,y.t)(k,(0,P.Z)({},e))};function F(e){var v=e.xMin,L=e.xMax,h=e.yMin,n=e.yMax;return[{x:v,y:h},{x:L,y:h},{x:L,y:n},{x:v,y:n}]}var V=function(e){var v=e.records,L=e.shape,h=e.showLabel,n=e.labelCfg,u=e.LabelView,m=!1;return(0,y.t)("group",null,v.map(function(o,d){var _=o.key,x=o.children,f=d===v.length-1,Z=f?o:v[d+1],g=Z.children,O=F(g[0]),W=F(g[g.length-1]);m||(m=g[0].yMax>x[0].yMax),m&&(O.reverse(),W.reverse());var D=x.map(function(A,U){var B=F(A);return m&&B.reverse(),f?L==="pyramid"&&(B=[c(B[0],B[1]),B[2],B[3]]):(U===0&&(B[0]=O[3]),U===x.length-1&&(B[1]=W[2])),(0,P.Z)((0,P.Z)({},A),{},{points:B})});return(0,y.t)("group",{key:_},D.map(function(A){var U=A.points,B=A.color,N=A.shape;return(0,y.t)("group",null,(0,y.t)("polygon",{attrs:(0,P.Z)({points:U,fill:B},N)}),h&&u?(0,y.t)(u,(0,P.Z)({record:A,points:U},n)):null)}))}))},J=I(i)},82140:function(t,b,r){"use strict";r.r(b),r.d(b,{default:function(){return p}});var s=r(21071),i=r.n(s),l=r(77617),R=r(56501),C=r(70113),M=r(49286),j=r(8241),T=r(32648),y=[{name:"London",\u6708\u4EFD:"Jan.",\u6708\u5747\u964D\u96E8\u91CF:18.9},{name:"London",\u6708\u4EFD:"Feb.",\u6708\u5747\u964D\u96E8\u91CF:28.8},{name:"London",\u6708\u4EFD:"Mar.",\u6708\u5747\u964D\u96E8\u91CF:39.3},{name:"London",\u6708\u4EFD:"Apr.",\u6708\u5747\u964D\u96E8\u91CF:81.4},{name:"London",\u6708\u4EFD:"May.",\u6708\u5747\u964D\u96E8\u91CF:47},{name:"London",\u6708\u4EFD:"Jun.",\u6708\u5747\u964D\u96E8\u91CF:20.3},{name:"London",\u6708\u4EFD:"Jul.",\u6708\u5747\u964D\u96E8\u91CF:24},{name:"London",\u6708\u4EFD:"Aug.",\u6708\u5747\u964D\u96E8\u91CF:35.6},{name:"Berlin",\u6708\u4EFD:"Jan.",\u6708\u5747\u964D\u96E8\u91CF:12.4},{name:"Berlin",\u6708\u4EFD:"Feb.",\u6708\u5747\u964D\u96E8\u91CF:23.2},{name:"Berlin",\u6708\u4EFD:"Mar.",\u6708\u5747\u964D\u96E8\u91CF:34.5},{name:"Berlin",\u6708\u4EFD:"Apr.",\u6708\u5747\u964D\u96E8\u91CF:99.7},{name:"Berlin",\u6708\u4EFD:"May.",\u6708\u5747\u964D\u96E8\u91CF:52.6},{name:"Berlin",\u6708\u4EFD:"Jun.",\u6708\u5747\u964D\u96E8\u91CF:35.5},{name:"Berlin",\u6708\u4EFD:"Jul.",\u6708\u5747\u964D\u96E8\u91CF:37.4},{name:"Berlin",\u6708\u4EFD:"Aug.",\u6708\u5747\u964D\u96E8\u91CF:42.4}];function p(){var S=(0,l.useState)(0),c=i()(S,2),E=c[0],a=c[1];return(0,T.jsxs)("div",{children:[(0,T.jsx)("button",{onClick:function(){a((E+1)%2)},children:"+1"}),(0,T.jsx)(R.Z,{children:(0,T.jsxs)(C.Z,{data:y,children:[(0,T.jsx)(M.ZP,{field:"\u6708\u4EFD"}),(0,T.jsx)(M.ZP,{field:"\u6708\u5747\u964D\u96E8\u91CF"}),E===0?(0,T.jsx)(j.ZP,{x:"\u6708\u4EFD",y:"\u6708\u5747\u964D\u96E8\u91CF",color:"name",adjust:{type:"dodge",marginRatio:.05}}):(0,T.jsx)(j.ZP,{x:"\u6708\u4EFD",y:"\u6708\u5747\u964D\u96E8\u91CF",color:"name",adjust:"stack"})]})})]})}},58426:function(t){function b(r,s){(s==null||s>r.length)&&(s=r.length);for(var i=0,l=new Array(s);i<s;i++)l[i]=r[i];return l}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},24731:function(t){function b(r){if(Array.isArray(r))return r}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},74771:function(t){function b(r,s){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var l=[],R=!0,C=!1,M,j;try{for(i=i.call(r);!(R=(M=i.next()).done)&&(l.push(M.value),!(s&&l.length===s));R=!0);}catch(T){C=!0,j=T}finally{try{!R&&i.return!=null&&i.return()}finally{if(C)throw j}}return l}}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},17347:function(t){function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},21071:function(t,b,r){var s=r(24731),i=r(74771),l=r(8177),R=r(17347);function C(M,j){return s(M)||i(M,j)||l(M,j)||R()}t.exports=C,t.exports.__esModule=!0,t.exports.default=t.exports},8177:function(t,b,r){var s=r(58426);function i(l,R){if(!!l){if(typeof l=="string")return s(l,R);var C=Object.prototype.toString.call(l).slice(8,-1);if(C==="Object"&&l.constructor&&(C=l.constructor.name),C==="Map"||C==="Set")return Array.from(l);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return s(l,R)}}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
